# 🏗️ Constructure - Визуальный конструктор образовательных курсов

<div align="center">

![Constructure Logo](https://img.shields.io/badge/Constructure-Visual%20Course%20Builder-blue?style=for-the-badge&logo=education)

**Интуитивная платформа для создания образовательных курсов с профессиональным drag & drop редактором**

[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?style=flat-square&logo=docker)](https://www.docker.com/)
[![Next.js](https://img.shields.io/badge/Next.js-14-000000?style=flat-square&logo=next.js)](https://nextjs.org/)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-3178C6?style=flat-square&logo=typescript)](https://www.typescriptlang.org/)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-336791?style=flat-square&logo=postgresql)](https://www.postgresql.org/)
[![Redis](https://img.shields.io/badge/Redis-7-DC382D?style=flat-square&logo=redis)](https://redis.io/)

[🚀 Быстрый старт](#-быстрый-старт) • [📖 Документация](ЗАПУСК.md) • [🎮 Демо](#-демо) • [🛠️ API](#-api-endpoints)

</div>

---

## ✨ Основные возможности

### 🎨 **Профессиональный визуальный редактор**
- **Увеличенное поле редактирования** (1200x800px) с координатной сеткой
- **Зум колесиком мыши** от 30% до 200% с автоматическим расширением канваса
- **Drag & Drop** перетаскивание блоков с умными границами
- **Система визуальных соединений** между элементами со стрелками
- **Режим соединения** для создания логических связей между блоками

### 🔗 **Интерактивные элементы курса**
- **📚 Уроки** - основной учебный материал
- **❓ Тесты** - проверка знаний с вопросами
- **📝 Задания** - практические упражнения
- **Визуальные связи** для определения последовательности изучения

### 💾 **Реальное сохранение данных**
- **localStorage** интеграция для сохранения курсов
- **Автоматическая загрузка** данных при повторном открытии
- **Синхронизация** между редактором, просмотром и списком курсов
- **Сохранение позиций** блоков и всех структурных изменений

### 🎯 **Полноценное управление курсами**
- **Создание курсов** с полноценным визуальным редактором
- **Редактирование** существующих курсов с сохранением изменений
- **Просмотр курсов** с топологической сортировкой элементов
- **Статистика** по количеству уроков, тестов и заданий

### 🔐 **Система аутентификации**
- **JWT токены** с access/refresh механизмом
- **Защищённые маршруты** и middleware
- **4 готовых тестовых аккаунта** для быстрого тестирования
- **Интеграция с localStorage** для состояния пользователя

---

## 🚀 Быстрый старт

### 📋 Предварительные требования

- **Docker** >= 20.10.0
- **Docker Compose** >= 2.0.0
- **curl** (для проверки готовности сервисов)

### ⚡ Супер-быстрый запуск (рекомендуется!)

```bash
# Клонируйте репозиторий
git clone https://github.com/f1b0nacc1-afk/constructure.git
cd constructure

# Запустите автоматический скрипт
./quick-start.sh
```

**🎯 Скрипт автоматически:**
- ✅ Проверит все зависимости (Docker, Docker Compose)
- 🔧 Остановит старые контейнеры
- 🚀 Запустит все сервисы
- ⏳ Дождется готовности всех компонентов
- 📊 Применит миграции базы данных
- 📋 Покажет информацию о доступных сервисах

### 🌐 Доступные сервисы

| Сервис | URL | Описание |
|--------|-----|----------|
| **🎨 Frontend** | http://localhost:3000 | Основное веб-приложение |
| **⚙️ Backend API** | http://localhost:3001 | REST API сервер |
| **🌐 Nginx** | http://localhost:8000 | Главный прокси-сервер |
| **🗄️ Adminer** | http://localhost:8080 | Веб-интерфейс для БД |
| **🐘 PostgreSQL** | localhost:5433 | База данных |
| **🔴 Redis** | localhost:6379 | Кэш и сессии |

---

## 🎮 Демо

### 🔑 Тестовые аккаунты

Для удобства тестирования созданы готовые аккаунты:

| Роль | Email | Пароль | Описание |
|------|-------|--------|----------|
| **👑 Администратор** | admin@constructure.com | admin123456 | Полный доступ ко всем функциям |
| **👨‍🏫 Преподаватель** | teacher@example.com | teacher123 | Создание и управление курсами |
| **👨‍🎓 Студент** | student@example.com | student123 | Прохождение курсов и тестов |
| **🧪 Тестовый** | test@example.com | password123 | Общий тестовый аккаунт |

**🎯 Быстрый доступ**: http://localhost:3000/test-accounts

### 📚 Примеры курсов

Приложение включает 3 готовых курса для демонстрации:

1. **💻 Введение в программирование** - 3 элемента, 2 связи
2. **🎨 Основы дизайна** - 3 элемента, 2 связи  
3. **📊 Управление проектами** - 5 элементов, 4 связи

---

## 🎨 Как использовать визуальный редактор

### 🆕 Создание нового курса
1. Перейдите на http://localhost:3000/courses
2. Нажмите **"Создать курс"**
3. Заполните название и описание
4. Используйте полноценный визуальный редактор:
   - **Добавляйте элементы** кнопками "📚 Урок", "❓ Тест", "📝 Задание"
   - **Перетаскивайте блоки** мышью
   - **Создавайте связи** в режиме соединения
   - **Используйте зум** колесиком мыши
5. Нажмите **"💾 Создать курс"**

### ✏️ Редактирование курса
1. Откройте любой курс для редактирования
2. **Навигация и зум:**
   - **Колесико мыши** - приближение/отдаление (30%-200%)
   - **Автоматическое расширение** канваса при отдалении
   - **Кнопки зума** для точного управления
3. **Работа с элементами:**
   - **Перетаскивание** - просто тащите блоки мышью
   - **Редактирование текста** - кликайте на название или описание
   - **Удаление блока** - нажмите "×" на блоке
4. **Создание связей:**
   - Нажмите **"🔗 Соединить блоки"**
   - Кликните на первый блок, затем на второй
   - **Удаление связи** - кликните красный кружок на линии
5. **Сохранение** - нажмите **"💾 Сохранить"**

---

## 📂 Архитектура проекта

```
constructure/
├── 🎨 apps/web/                    # Next.js Frontend
│   ├── src/app/
│   │   ├── auth/                   # Аутентификация
│   │   ├── courses/                # Управление курсами
│   │   │   ├── page.tsx           # Список курсов
│   │   │   ├── new/               # Создание курса
│   │   │   └── [id]/              # Просмотр/редактирование
│   │   └── test-accounts/         # Тестовые аккаунты
│   ├── src/components/
│   │   ├── auth/                  # Компоненты аутентификации
│   │   ├── layout/                # Навигация и макеты
│   │   └── ui/                    # UI компоненты
│   └── src/hooks/                 # React хуки
├── ⚙️ apps/api/                    # Fastify Backend
│   ├── src/routes/                # API маршруты
│   └── prisma/                    # База данных
├── 📦 packages/types/              # TypeScript типы
├── 🐳 docker-compose.yml           # Docker конфигурация
├── 🚀 quick-start.sh              # Скрипт быстрого запуска
├── 🛑 quick-stop.sh               # Скрипт остановки
└── 📖 ЗАПУСК.md                   # Подробная документация
```

---

## 🛠️ Полезные команды

### 🐳 Docker управление
```bash
# Запуск всех сервисов
docker-compose up -d

# Остановка всех сервисов  
docker-compose down
# или
./quick-stop.sh

# Просмотр логов
docker-compose logs -f web    # Фронтенд
docker-compose logs -f api    # Backend

# Перезапуск сервисов
docker-compose restart web
docker-compose restart api

# Пересборка контейнеров
docker-compose build --no-cache
```

### 🗄️ База данных
```bash
# Prisma Studio UI
docker-compose exec api npx prisma studio

# Применить миграции
docker-compose exec api npx prisma migrate deploy

# Генерация Prisma Client
docker-compose exec api npx prisma generate
```

---

## 🔒 API Endpoints

### 🔐 Аутентификация
```bash
POST /api/auth/register    # Регистрация пользователя
POST /api/auth/login       # Авторизация
GET  /api/auth/me          # Получение профиля (защищённый)
POST /api/auth/refresh     # Обновление токена
```

### 📚 Курсы
```bash
GET    /api/courses        # Список курсов
POST   /api/courses        # Создание курса
GET    /api/courses/:id    # Получение курса
PUT    /api/courses/:id    # Обновление курса
DELETE /api/courses/:id    # Удаление курса
```

### 💡 Пример использования
```bash
# Авторизация
curl -X POST http://localhost:3001/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"password123"}'

# Получение курсов
curl -X GET http://localhost:3001/api/courses \
  -H "Authorization: Bearer YOUR_TOKEN"
```

---

## 🎯 Статус разработки

### ✅ **Полностью реализовано**

**🎨 Визуальный редактор курсов:**
- Профессиональное поле редактирования с координатной сеткой
- Зум и автоматическое расширение канваса
- Drag & Drop с умными границами
- Система визуальных соединений
- Реальное сохранение в localStorage

**🔐 Система аутентификации:**
- JWT токены с refresh механизмом
- Защищённые маршруты
- 4 готовых тестовых аккаунта
- Интеграция фронтенда с бэкендом

**⚙️ Backend инфраструктура:**
- RESTful API с Fastify
- PostgreSQL + Prisma ORM
- Redis для кэширования
- Docker-compose setup

**🎨 Frontend (Next.js 14):**
- Современный UI с Tailwind CSS
- Полноценное управление курсами
- Отзывчивый дизайн
- TypeScript интеграция

### 🔄 **В активной разработке**

- Расширенные возможности редактора
- Дополнительные типы элементов курса
- Улучшенная система уведомлений
- Экспорт курсов в различные форматы

### 📋 **Запланировано**

- Совместная работа в реальном времени
- Аналитика и отчёты по курсам
- Интеграция с внешними LMS
- Мобильное приложение

---

## 🤝 Вклад в проект

Мы приветствуем вклад в развитие проекта! 

1. **Fork** репозитория
2. Создайте **feature branch** (`git checkout -b feature/amazing-feature`)
3. **Commit** изменения (`git commit -m 'Add amazing feature'`)
4. **Push** в branch (`git push origin feature/amazing-feature`)
5. Откройте **Pull Request**

---

## 📄 Лицензия

Этот проект распространяется под лицензией MIT. См. файл [LICENSE](LICENSE) для подробностей.

---

## 📞 Поддержка

- 📧 **Email**: support@constructure.dev
- 🐛 **Issues**: [GitHub Issues](https://github.com/f1b0nacc1-afk/constructure/issues)
- 📖 **Документация**: [ЗАПУСК.md](ЗАПУСК.md)

---

<div align="center">

**🏗️ Создано с ❤️ для образования**

[⭐ Поставьте звезду](https://github.com/f1b0nacc1-afk/constructure) • [🔄 Fork проекта](https://github.com/f1b0nacc1-afk/constructure/fork) • [📢 Поделиться](https://twitter.com/intent/tweet?text=Check%20out%20Constructure%20-%20Visual%20Course%20Builder!&url=https://github.com/f1b0nacc1-afk/constructure)

</div> 